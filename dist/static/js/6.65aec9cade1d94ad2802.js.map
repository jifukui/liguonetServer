{"version":3,"sources":["webpack:///src/pages/login.vue","webpack:///./src/pages/login.vue?6a12","webpack:///./src/pages/login.vue"],"names":["login","name","data","logining","account","username","pwd","rules","required","message","trigger","validator","rule","value","callback","test","Error","checked","methods","handleLogin","_this","this","$refs","AccountFrom","validate","valid","timestamp","Date","valueOf","aoData","Authentication","UserName","SessionId","CommandType","CommandData","Password","Protocol","Name","Version","JSON","datalen","request","that","$axios","post","then","response","status","sessionStorage","setItem","Session_id","Priority","$router","push","console","log","setCookie","alert","error","errorstring","cn","catch","c_name","c_pwd","exdays","exdate","setTime","getTime","window","document","cookie","toGMTString","getCookie","length","arr","split","i","arr2","clearCookie","mounted","pages_login","render","_vm","_h","$createElement","_c","_self","_m","_v","staticClass","ref","attrs","model","label-position","label-width","prop","type","maxlength","placeholder","$$v","$set","expression","staticStyle","margin-top","nativeOn","keyup","$event","_k","keyCode","key","width","height","margin","margin-bottom","loading","click","preventDefault","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/6.65aec9cade1d94ad2802.js","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"header\">\r\n            <div class=\"container_fluid\">\r\n                北京市利国电子技术有限公司网络管理系统\r\n            </div>\r\n        </div>\r\n        <div class=\"login_div\">\r\n            <el-form ref=\"AccountFrom\" :model=\"account\" :rules=\"rules\" label-position=\"left\" label-width=\"0px\" class=\"demo-ruleForm login-container\">\r\n                <p class=\"title\">利国电子登录</p>\r\n                <el-form-item prop=\"username\" class=\"input_box\">\r\n                    <el-input type=\"text\" class=\"input_box_style\" maxlength=\"15\" v-model=\"account.username\" placeholder=\"账号\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"pwd\" class=\"input_box\">\r\n                    <el-input type=\"password\" style=\"margin-top: 10px;\" class=\"input_box_style\" maxlength=\"20\" v-model=\"account.pwd\" placeholder=\"密码\" @keyup.enter.native=\"handleLogin\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item style=\"width:250px;height:30px;margin:10px auto 10px\">\r\n                    <el-checkbox v-model=\"checked\">记住密码</el-checkbox>\r\n                </el-form-item>\r\n                <el-form-item class=\"input_box\" style=\" margin-bottom: 30px;\">\r\n                    <el-button type=\"primary\" style=\"width:230px; margin-top: 10px;\" @click.native.prevent=\"handleLogin\" :loading=\"logining\">登录</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"login\",\r\n    data() {\r\n        var checkone = (rule, value, callback) => {\r\n            let regname = /^(\\w){5,15}$/;\r\n            if (!regname.test(value)) {\r\n                callback(new Error(\"请输入正确格式账户名\"));\r\n                return false;\r\n            }\r\n            callback();\r\n        };\r\n        var checktwo = (rule, value, callback) => {\r\n            let regname = /^(\\w){8,20}$/;\r\n            if (!regname.test(value)) {\r\n                callback(new Error(\"请输入正确格式密码\"));\r\n                return false;\r\n            }\r\n            callback();\r\n        };\r\n        return {\r\n            logining: false,\r\n            account: {\r\n                username: \"\",\r\n                pwd: \"\"\r\n            },\r\n            rules: {\r\n                username: [\r\n                    { required: true, message: \"请输入账户\", trigger: \"blur\" },\r\n                    { required: true, trigger: \"blur\", validator: checkone }\r\n                ],\r\n                pwd: [\r\n                    { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n                    { required: true, trigger: \"blur\", validator: checktwo }\r\n                ]\r\n            },\r\n            checked: false\r\n        };\r\n    },\r\n    methods: {\r\n        handleLogin: function() {\r\n            this.$refs.AccountFrom.validate(valid => {\r\n                if (valid) {\r\n                    var timestamp = new Date().valueOf();\r\n                    let aoData = {\r\n                        Authentication: {\r\n                            UserName: this.account.username,\r\n                            SessionId: \"\"\r\n                        },\r\n                        data: [\r\n                            {\r\n                                CommandType: \"Authentication\",\r\n                                CommandData: {\r\n                                    UserName: this.account.username,\r\n                                    Password: this.account.pwd\r\n                                }\r\n                            }\r\n                        ],\r\n                        Protocol: {\r\n                            Name: \"liguoNetWork\",\r\n                            Version: \"1.0.0\"\r\n                        },\r\n                        JSON: {\r\n                            Version: \"1.0.0\"\r\n                        },\r\n                        datalen: 1,\r\n                        request: timestamp,\r\n                        timestamp: timestamp\r\n                    };\r\n                    let that = this;\r\n                    this.$axios\r\n                        .post(\"/cmd\", aoData)\r\n                        .then(function(response) {\r\n                            if (response.data.status == \"success\") {\r\n                                sessionStorage.setItem(\r\n                                    \"access_token\",\r\n                                    response.data.data.Session_id\r\n                                );\r\n                                sessionStorage.setItem(\r\n                                    \"access_username\",\r\n                                    that.account.username\r\n                                );\r\n                                sessionStorage.setItem(\r\n                                    \"access_priority\",\r\n                                    response.data.data.Priority\r\n                                );\r\n                                that.$router.push(\"/\");\r\n\r\n                                //判断复选框是否被勾选? 勾选则调用配置cookie方法\r\n                                if (that.checked == true) {\r\n                                    console.log(\"checked == true\");\r\n                                    //传入账号名，密码，和保存天数3个参数？\r\n                                    that.setCookie(\r\n                                        that.account.username,\r\n                                        that.account.pwd,\r\n                                        7\r\n                                    );\r\n                                } else {\r\n                                    // console.log(\"清空Cookie\");\r\n                                    // //清空Cookie\r\n                                    // self.clearCookie();\r\n                                }\r\n                            } else if (response.data.status == \"fail\") {\r\n                                alert(response.data.error.errorstring.cn);\r\n                            }\r\n                        })\r\n                        .catch(function(error) {\r\n                            console.log(error);\r\n                        });\r\n                } else {\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        //设置cookie\r\n        setCookie(c_name, c_pwd, exdays) {\r\n            var exdate = new Date(); //获取时间\r\n            exdate.setTime(exdate.getTime() + 24 * 60 * 60 * 1000 * exdays); //保存的天�?\r\n            //字符串拼接cookie\r\n            window.document.cookie =\r\n                \"userName\" +\r\n                \"=\" +\r\n                c_name +\r\n                \";path=/;expires=\" +\r\n                exdate.toGMTString();\r\n            window.document.cookie =\r\n                \"userPwd\" +\r\n                \"=\" +\r\n                c_pwd +\r\n                \";path=/;expires=\" +\r\n                exdate.toGMTString();\r\n        },\r\n        //读取cookie\r\n        getCookie: function() {\r\n            if (document.cookie.length > 0) {\r\n                var arr = document.cookie.split(\"; \"); //这里显示的格式需要切割一下自己可输出看下\r\n                for (var i = 0; i < arr.length; i++) {\r\n                    var arr2 = arr[i].split(\"=\"); //再次切割\r\n                    //判断查找相对应的�?\r\n                    if (arr2[0] == \"userName\") {\r\n                        this.account.username = arr2[1]; //保存到保存数据的地方\r\n                    } else if (arr2[0] == \"userPwd\") {\r\n                        this.account.pwd = arr2[1];\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        //清除cookie\r\n        clearCookie: function() {\r\n            this.setCookie(\"\", \"\", -1); //修改2值都为空，天数为�?1天就好了\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getCookie();\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"../style/common\";\r\n.header {\r\n    height: 40px;\r\n    width: 100%;\r\n    background-color: #2c2c2c;\r\n    box-shadow: 0 3px 10px 3px rgba(77, 77, 77, 0.45);\r\n    display: flex;\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 99;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n.login_div {\r\n    /*width: 460px;*/\r\n    width: 230px;\r\n    padding: 40px;\r\n    margin: 200px auto 0;\r\n    /*border: 1px solid #ccc;*/\r\n    border-radius: 5px;\r\n    /*background-color: rgba(000,000,000,.4)*/\r\n    /*box-shadow: 2px 2px 2px #ccc;*/\r\n}\r\n.input_box {\r\n    width: 230px;\r\n    height: 30px;\r\n    margin: 30px auto;\r\n}\r\n.input_box_style {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n.title {\r\n    text-align: center;\r\n    font-size: 30px;\r\n}\r\n.text_center {\r\n    text-align: center;\r\n}\r\n.login_btn {\r\n    width: 200px;\r\n    height: 30px;\r\n    margin: 20px auto;\r\n    line-height: 0;\r\n}\r\n.inp {\r\n    margin: 20px;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"login_div\"},[_c('el-form',{ref:\"AccountFrom\",staticClass:\"demo-ruleForm login-container\",attrs:{\"model\":_vm.account,\"rules\":_vm.rules,\"label-position\":\"left\",\"label-width\":\"0px\"}},[_c('p',{staticClass:\"title\"},[_vm._v(\"利国电子登录\")]),_vm._v(\" \"),_c('el-form-item',{staticClass:\"input_box\",attrs:{\"prop\":\"username\"}},[_c('el-input',{staticClass:\"input_box_style\",attrs:{\"type\":\"text\",\"maxlength\":\"15\",\"placeholder\":\"账号\"},model:{value:(_vm.account.username),callback:function ($$v) {_vm.$set(_vm.account, \"username\", $$v)},expression:\"account.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"input_box\",attrs:{\"prop\":\"pwd\"}},[_c('el-input',{staticClass:\"input_box_style\",staticStyle:{\"margin-top\":\"10px\"},attrs:{\"type\":\"password\",\"maxlength\":\"20\",\"placeholder\":\"密码\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleLogin($event)}},model:{value:(_vm.account.pwd),callback:function ($$v) {_vm.$set(_vm.account, \"pwd\", $$v)},expression:\"account.pwd\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"250px\",\"height\":\"30px\",\"margin\":\"10px auto 10px\"}},[_c('el-checkbox',{model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}},[_vm._v(\"记住密码\")])],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"input_box\",staticStyle:{\"margin-bottom\":\"30px\"}},[_c('el-button',{staticStyle:{\"width\":\"230px\",\"margin-top\":\"10px\"},attrs:{\"type\":\"primary\",\"loading\":_vm.logining},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.handleLogin($event)}}},[_vm._v(\"登录\")])],1)],1)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"container_fluid\"},[_vm._v(\"\\n            北京市利国电子技术有限公司网络管理系统\\n        \")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-283d497d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-283d497d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-283d497d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-283d497d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}