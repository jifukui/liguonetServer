webpackJsonp([2],{KQyT:function(t,e){},hmqY:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("I95x");var a={components:{},props:{},data:function(){return{tableData:[],dialogVisible:!1,dialogVisiblerevise:!1,dialogVisiblerevise1:!1,dialogVisibledelete:!1,username:"",quanxian:"",permissions:255,clickIndex:"",clickrows:"",Priority:!1,addUserName:"",addUserPsw:"",addUserPswTwo:"",adminPsw:"",adminPsw1:"",adminPsw2:"",revisePsw:"",revisePswTwo:"",newPsw:"",newPswTwo:"",originalPsw:""}},watch:{},computed:{},methods:{addClick:function(){this.dialogVisible=!0,this.addUserName="",this.addUserPsw="",this.addUserPswTwo="",this.adminPsw=""},handleClick:function(t,e){1==e?this.dialogVisiblerevise=!0:this.dialogVisiblerevise1=!0,this.adminPsw1="",this.adminPsw2="",this.revisePsw="",this.revisePswTwo="",this.newPsw="",this.newPswTwo="",this.originalPsw="",this.username=t.UserName,this.quanxian=t.priority,console.log(t)},reviseInfo:function(){var t=(new Date).valueOf(),e=sessionStorage.getItem("access_username"),s=sessionStorage.getItem("access_token");if(this.newPsw!=this.newPswTwo)return alert("两次输入的密码不一致，请重新输入"),!1;if(!/^(\w){8,20}$/.test(this.newPsw))return alert("请输入正确格式密码"),!1;if("admin"!=this.username){if(!/^[0-9]*[1-9][0-9]*$/.test(this.quanxian)||this.quanxian<1||this.quanxian>255)return alert("请输入正确权限值"),!1}var a={Authentication:{UserName:e,SessionId:s},data:[{CommandType:"set",CommandData:{CommandName:"UpdateUser",Auth:{UserName:e,password:this.adminPsw1},UserInfo:{UserName:this.username,password:this.newPsw,priority:this.quanxian}}}],Protocol:{Name:"liguoNetWork",Version:"1.0.0"},JSON:{Version:"1.0.0"},datalen:1,request:t,timestamp:t},i=this;this.$axios.post("/cmd",a).then(function(t){"success"==t.data.status?(alert("修改成功"),"admin"==i.username?(sessionStorage.clear(),i.$router.replace("/pages/login"),document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()):(i.dialogVisiblerevise=!1,i.getList())):"fail"==t.data.status&&alert(t.data.error.errorstring.cn)}).catch(function(t){console.log(t)})},reviseInfo1:function(){if(this.revisePsw!=this.revisePswTwo)return alert("两次输入的密码不一致，请重新输入"),!1;if(!/^(\w){8,20}$/.test(this.revisePsw))return alert("请输入正确格式密码"),!1;var t=(new Date).valueOf(),e=sessionStorage.getItem("access_username"),s={Authentication:{UserName:e,SessionId:sessionStorage.getItem("access_token")},data:[{CommandType:"set",CommandData:{CommandName:"UpdateUser",Auth:{UserName:e,password:this.originalPsw},UserInfo:{UserName:this.username,password:this.revisePsw,priority:this.quanxian}}}],Protocol:{Name:"liguoNetWork",Version:"1.0.0"},JSON:{Version:"1.0.0"},datalen:1,request:t,timestamp:t},a=this;this.$axios.post("/cmd",s).then(function(t){"success"==t.data.status?(alert("修改成功"),sessionStorage.clear(),a.$router.replace("/pages/login"),document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()):"fail"==t.data.status&&alert(t.data.error.errorstring.cn)}).catch(function(t){console.log(t)})},deleteRow:function(t,e,s){this.dialogVisibledelete=!0,this.username=e.UserName,this.clickIndex=t,console.log(this.clickIndex),this.clickrows=s},deleteInfo:function(){var t=(new Date).valueOf(),e=sessionStorage.getItem("access_username"),s={Authentication:{UserName:e,SessionId:sessionStorage.getItem("access_token")},data:[{CommandType:"set",CommandData:{CommandName:"DeleteUser",Auth:{UserName:e,password:this.adminPsw2},UserName:this.username}}],Protocol:{Name:"liguoNetWork",Version:"1.0.0"},JSON:{Version:"1.0.0"},datalen:1,request:t,timestamp:t},a=this;this.$axios.post("/cmd",s).then(function(t){"success"==t.data.status?(alert("删除成功"),a.dialogVisibledelete=!1,a.getList()):"fail"==t.data.status&&alert(t.data.error.errorstring.cn)}).catch(function(t){console.log(t)})},submit:function(){if(this.addUserPsw!=this.addUserPswTwo)return alert("两次输入的密码不一致，请重新输入"),!1;if(!/^(\w){5,15}$/.test(this.addUserName))return alert("请输入正确格式账户名"),!1;if(!/^(\w){8,20}$/.test(this.addUserPsw))return alert("请输入正确格式密码"),!1;if(!/^[0-9]*[1-9][0-9]*$/.test(this.permissions)||this.permissions<1||this.permissions>255)return alert("请输入正确权限值"),!1;var t=(new Date).valueOf(),e=sessionStorage.getItem("access_username"),s={Authentication:{UserName:e,SessionId:sessionStorage.getItem("access_token")},data:[{CommandType:"set",CommandData:{CommandName:"AddUser",Auth:{UserName:e,password:this.adminPsw},UserInfo:{UserName:this.addUserName,password:this.addUserPsw,priority:this.permissions}}}],Protocol:{Name:"liguoNetWork",Version:"1.0.0"},JSON:{Version:"1.0.0"},datalen:1,request:t,timestamp:t},a=this;this.$axios.post("/cmd",s).then(function(t){"success"==t.data.status?(alert("添加成功"),a.dialogVisible=!1,a.getList()):"fail"==t.data.status&&alert(t.data.error.errorstring.cn)}).catch(function(t){console.log(t)})},getList:function(){var t=(new Date).valueOf(),e=sessionStorage.getItem("access_username"),s={Authentication:{UserName:e,SessionId:sessionStorage.getItem("access_token")},data:[{CommandType:"get",CommandData:{CommandName:"User",UserName:e}}],Protocol:{Name:"liguoNetWork",Version:"1.0.0"},JSON:{Version:"1.0.0"},datalen:1,request:t,timestamp:t},a=this;this.$axios.post("/cmd",s).then(function(t){"success"==t.data.status?a.tableData=t.data.data[0]:"fail"==t.data.status&&alert(t.data.error.errorstring.cn)}).catch(function(t){console.log(t)})}},created:function(){},mounted:function(){this.$nextTick(function(){"0"==sessionStorage.getItem("access_priority")&&(this.Priority=!0),this.getList()});var t=this;window.myInterval=setInterval(function(){t.getList()},2e3)}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[t.Priority?s("div",{staticClass:"content"},[s("div",[s("div",{staticStyle:{padding:"5px 0 0 5px"}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addClick()}}},[t._v("添加")])],1),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[s("el-table-column",{attrs:{prop:"UserName",label:"用户名",width:"280"}}),t._v(" "),s("el-table-column",{attrs:{prop:"priority",label:"权限",width:"280"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){t.handleClick(e.row,t.Priority)}}},[t._v("修改")]),t._v(" "),0!=e.row.priority?s("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(s){s.preventDefault(),t.deleteRow(e.$index,e.row,t.tableData)}}},[t._v("删除")]):t._e()]}}])})],1)],1)]):s("div",{staticClass:"content"},[s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[s("el-table-column",{attrs:{prop:"UserName",label:"用户名",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{prop:"priority",label:"权限",width:"300"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){t.handleClick(e.row,t.Priority)}}},[t._v("修改")])]}}])})],1)],1)]),t._v(" "),s("el-dialog",{attrs:{title:"添加用户",visible:t.dialogVisible,"append-to-body":!0,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",[s("table",{staticStyle:{width:"100%"}},[s("tr",[s("td",{attrs:{align:"right",width:"32%"}},[t._v("用户名：")]),t._v(" "),s("td",{attrs:{width:"68%"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.addUserName,expression:"addUserName"}],staticStyle:{width:"70%"},attrs:{type:"text"},domProps:{value:t.addUserName},on:{input:function(e){e.target.composing||(t.addUserName=e.target.value)}}})])]),t._v(" "),s("tr",[s("td",{attrs:{align:"right"}},[t._v("密码：")]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.addUserPsw,expression:"addUserPsw"}],staticStyle:{width:"70%","margin-top":"4px"},attrs:{type:"password"},domProps:{value:t.addUserPsw},on:{input:function(e){e.target.composing||(t.addUserPsw=e.target.value)}}})])]),t._v(" "),s("tr",[s("td",{attrs:{align:"right"}},[t._v("确认密码：")]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.addUserPswTwo,expression:"addUserPswTwo"}],staticStyle:{width:"70%","margin-top":"4px"},attrs:{type:"password"},domProps:{value:t.addUserPswTwo},on:{input:function(e){e.target.composing||(t.addUserPswTwo=e.target.value)}}})])]),t._v(" "),s("tr",[s("td",{attrs:{align:"right"}},[t._v("权限：")]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.permissions,expression:"permissions"}],staticStyle:{width:"70%","margin-top":"4px"},attrs:{type:"number"},domProps:{value:t.permissions},on:{input:function(e){e.target.composing||(t.permissions=e.target.value)}}})])]),t._v(" "),s("tr",[s("td",{attrs:{align:"right"}},[t._v("管理员密码：")]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.adminPsw,expression:"adminPsw"}],staticStyle:{width:"70%","margin-top":"4px"},attrs:{type:"password"},domProps:{value:t.adminPsw},on:{input:function(e){e.target.composing||(t.adminPsw=e.target.value)}}})])])])]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("保 存")]),t._v(" "),s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:"修改用户",visible:t.dialogVisiblerevise,"append-to-body":!0,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisiblerevise=e}}},[s("div",[s("table",{staticStyle:{width:"100%"}},[s("tr",[s("td",{attrs:{align:"right",width:"32%"}},[t._v("用户名：")]),t._v(" "),s("td",{attrs:{width:"68%"}},[s("span",[t._v(t._s(t.username))])])]),t._v(" "),s("tr",[s("td",{attrs:{align:"right"}},[t._v("新密码：")]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPsw,expression:"newPsw"}],staticStyle:{width:"70%","margin-top":"4px"},attrs:{type:"password"},domProps:{value:t.newPsw},on:{input:function(e){e.target.composing||(t.newPsw=e.target.value)}}})])]),t._v(" "),s("tr",[s("td",{attrs:{align:"right"}},[t._v("确认新密码：")]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPswTwo,expression:"newPswTwo"}],staticStyle:{width:"70%","margin-top":"4px"},attrs:{type:"password"},domProps:{value:t.newPswTwo},on:{input:function(e){e.target.composing||(t.newPswTwo=e.target.value)}}})])]),t._v(" "),s("tr",[s("td",{attrs:{align:"right"}},[t._v("权限：")]),t._v(" "),s("td",["admin"==t.username?s("span",[t._v(t._s(t.quanxian))]):s("input",{directives:[{name:"model",rawName:"v-model",value:t.quanxian,expression:"quanxian"}],staticStyle:{width:"70%","margin-top":"4px"},attrs:{type:"number"},domProps:{value:t.quanxian},on:{input:function(e){e.target.composing||(t.quanxian=e.target.value)}}})])]),t._v(" "),s("tr",[s("td",{attrs:{align:"right"}},[t._v("管理员密码：")]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.adminPsw1,expression:"adminPsw1"}],staticStyle:{width:"70%","margin-top":"4px"},attrs:{type:"password"},domProps:{value:t.adminPsw1},on:{input:function(e){e.target.composing||(t.adminPsw1=e.target.value)}}})])])])]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.reviseInfo}},[t._v("保 存")]),t._v(" "),s("el-button",{on:{click:function(e){t.dialogVisiblerevise=!1}}},[t._v("取 消")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:"修改用户",visible:t.dialogVisiblerevise1,"append-to-body":!0,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisiblerevise1=e}}},[s("div",[s("table",{staticStyle:{width:"100%"}},[s("tr",[s("td",{attrs:{align:"right",width:"32%"}},[t._v("用户名：")]),t._v(" "),s("td",{attrs:{width:"68%"}},[s("span",[t._v(t._s(t.username))])])]),t._v(" "),s("tr",[s("td",{attrs:{align:"right"}},[t._v("原始密码：")]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.originalPsw,expression:"originalPsw"}],staticStyle:{width:"70%","margin-top":"4px"},attrs:{type:"password"},domProps:{value:t.originalPsw},on:{input:function(e){e.target.composing||(t.originalPsw=e.target.value)}}})])]),t._v(" "),s("tr",[s("td",{attrs:{align:"right"}},[t._v("新密码：")]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.revisePsw,expression:"revisePsw"}],staticStyle:{width:"70%","margin-top":"4px"},attrs:{type:"password"},domProps:{value:t.revisePsw},on:{input:function(e){e.target.composing||(t.revisePsw=e.target.value)}}})])]),t._v(" "),s("tr",[s("td",{attrs:{align:"right"}},[t._v("确认新密码：")]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.revisePswTwo,expression:"revisePswTwo"}],staticStyle:{width:"70%","margin-top":"4px"},attrs:{type:"password"},domProps:{value:t.revisePswTwo},on:{input:function(e){e.target.composing||(t.revisePswTwo=e.target.value)}}})])]),t._v(" "),s("tr",[s("td",{attrs:{align:"right"}},[t._v("权限：")]),t._v(" "),s("td",[s("span",[t._v(t._s(t.quanxian))])])])])]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.reviseInfo1}},[t._v("保 存")]),t._v(" "),s("el-button",{on:{click:function(e){t.dialogVisiblerevise1=!1}}},[t._v("取 消")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:"删除用户",visible:t.dialogVisibledelete,"append-to-body":!0,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisibledelete=e}}},[s("div",[s("table",{staticStyle:{width:"100%"}},[s("tr",[s("td",{attrs:{align:"right",width:"32%"}},[t._v("用户名：")]),t._v(" "),s("td",{attrs:{width:"68%"}},[s("span",[t._v(t._s(t.username))])])]),t._v(" "),s("tr",[s("td",{attrs:{align:"right"}},[t._v("管理员密码：")]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.adminPsw2,expression:"adminPsw2"}],staticStyle:{width:"70%","margin-top":"4px"},attrs:{type:"password"},domProps:{value:t.adminPsw2},on:{input:function(e){e.target.composing||(t.adminPsw2=e.target.value)}}})])])])]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.deleteInfo()}}},[t._v("确 定")]),t._v(" "),s("el-button",{on:{click:function(e){t.dialogVisibledelete=!1}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[]};var n=s("VU/8")(a,i,!1,function(t){s("KQyT"),s("mbj0")},"data-v-4c9adb6a",null);e.default=n.exports},mbj0:function(t,e){}});
//# sourceMappingURL=2.326f78f9c2fdcde71be2.js.map